<!DOCTYPE html>
<html>
<head>
    <title>Interactive Folium Map</title>
    <meta charset="utf-8">
    <style>
        #map { height: 600px; width: 100%; }
    </style>
    <!-- ‡πÇ‡∏´‡∏•‡∏î Leaflet CSS/JS ‡∏à‡∏≤‡∏Å CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <h2>üìç ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</h2>

    <form method="POST" style="margin-bottom: 10px;">
        <input type="text" name="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà" required>
        <input type="number" step="any" name="lat" id="lat" placeholder="‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î" required>
        <input type="number" step="any" name="lng" id="lng" placeholder="‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î" required>
        <button type="submit">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏∏‡∏î</button>
    </form>

    <!-- ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
    <div id="map"></div>

    <script>
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û
        const map = L.map('map').setView([13.7563, 100.5018], 12);

        // ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);

        // ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î + ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î ‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î‡∏•‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
        let marker;
        map.on('click', function(e) {
            const { lat, lng } = e.latlng;

            // ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏•‡∏á‡πÉ‡∏ô input
            document.getElementById('lat').value = lat.toFixed(6);
            document.getElementById('lng').value = lng.toFixed(6);

            // ‡∏•‡∏ö‡∏´‡∏°‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏°
            if (marker) {
                map.removeLayer(marker);
            }

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏∏‡∏î‡πÉ‡∏´‡∏°‡πà
            marker = L.marker([lat, lng]).addTo(map)
                .bindPopup('üìç ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ô‡∏µ‡πâ').openPopup();
        });

        // ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏°‡∏∏‡∏î‡∏à‡∏≤‡∏Å static/map.html ‡∏ó‡∏µ‡πà Flask ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ (optional)
        fetch("{{ url_for('static', filename='map.html') }}")
            .then(res => res.text())
            .then(html => {
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.srcdoc = html;
                document.body.appendChild(iframe);
            });
    </script>
</body>
</html>
